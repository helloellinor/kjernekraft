{{define "event_card"}}
<div class="event-card {{.ClassType}}" data-event-id="{{.ID}}" onclick="toggleEventCard(this)">
    <div class="event-time">{{formatTimeShort .StartTime}}-{{formatTimeShort .EndTime}}</div>
    <div class="event-title">{{.Title}}</div>
    <div class="event-teacher">{{.TeacherName}}</div>
    {{$remaining := sub .Capacity .CurrentEnrolment}}
    <div class="event-spaces">
        {{if lt .CurrentEnrolment .Capacity}}
            {{if eq $remaining 1}}
                1 {{t $.Lang "events.spots_remaining_singular"}}
            {{else}}
                {{$remaining}} {{t $.Lang "events.spots_remaining"}}
            {{end}}
        {{else}}
            {{t $.Lang "events.waitlist"}}
        {{end}}
    </div>
    <div class="event-details">
        <button class="signup-button {{if ge .CurrentEnrolment .Capacity}}waitlist{{end}}" 
                onclick="signupForClass({{.ID}}); event.stopPropagation();">
            {{if lt .CurrentEnrolment .Capacity}}
                {{t $.Lang "events.sign_up"}}
            {{else}}
                {{t $.Lang "events.join_waitlist"}}
            {{end}}
        </button>
    </div>
</div>
{{end}}
