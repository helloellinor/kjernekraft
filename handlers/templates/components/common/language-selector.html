{{define "language_selector"}}
<div class="language-selector">
    <label for="language-select" class="language-label">{{t .Lang "language.select_language"}}</label>
    <select id="language-select" class="language-select" onchange="changeLanguage(this.value)">
        <option value="nb" {{if eq .Lang "nb"}}selected{{end}}>ğŸ‡©ğŸ‡° {{t .Lang "language.bokmal"}}</option>
        <option value="nn" {{if eq .Lang "nn"}}selected{{end}}>ğŸ‡³ğŸ‡´ {{t .Lang "language.nynorsk"}}</option>
        <option value="en" {{if eq .Lang "en"}}selected{{end}}>ğŸ‡ºğŸ‡¸ {{t .Lang "language.english"}}</option>
    </select>
</div>

<script>
function changeLanguage(lang) {
    // Set cookie
    document.cookie = `preferred_language=${lang}; path=/; max-age=${365 * 24 * 60 * 60}; SameSite=Lax`;
    
    // Reload page to apply new language
    window.location.reload();
}
</script>
{{end}}