{{define "membership_selector_form"}}
<style>
/* Membership Question Form Styles */
.membership-question-form {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.form-title {
    font-size: 1.25rem;
    margin-bottom: 1.5rem;
    color: #333;
    border-bottom: 2px solid #007cba;
    padding-bottom: 0.5rem;
    margin-top: 0;
}

.question-group {
    margin-bottom: 1.5rem;
}

.question-label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: #333;
}

.question-options {
    display: grid;
    gap: 0.5rem;
}

.option-label {
    display: flex;
    align-items: center;
    padding: 0.75rem;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    background: white;
}

.option-label:hover {
    border-color: #007cba;
    background-color: #f8f9fa;
}

.option-label input[type="radio"], 
.option-label input[type="checkbox"] {
    margin-right: 0.75rem;
    margin-bottom: 0;
}

.option-label input[type="radio"]:checked + span, 
.option-label input[type="checkbox"]:checked + span {
    font-weight: 600;
}

.option-label:has(input[type="radio"]:checked), 
.option-label:has(input[type="checkbox"]:checked) {
    border-color: #007cba;
    background-color: #e8f4fd;
}

.date-input {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 1rem;
}
</style>

<div class="membership-selector-container">
    <form class="membership-question-form" action="/medlemskap/recommendations" method="post">
        <h2 class="form-title">{{t .Lang "membership.tell_us_about_you"}}</h2>
        {{template "membership_form_content" .}}
    </form>
    
    <div class="membership-checkout-card">
        {{template "membership_checkout_content" .}}
    </div>
</div>

<style>
.membership-selector-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    align-items: start;
}

.membership-checkout-card {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    position: sticky;
    top: 2rem;
}

@media (max-width: 768px) {
    .membership-selector-container {
        grid-template-columns: 1fr;
        gap: 2rem;
    }
}
</style>
{{end}}

{{define "membership_form_content"}}
<div class="question-group commitment-group">
    <label class="question-label">{{t .Lang "membership.commitment_length"}}</label>
    <div class="question-options">
        {{template "commitment_options" .}}
    </div>
</div>

<div class="question-group student-group">
    <label class="question-label">{{t .Lang "membership.student_senior_question"}}</label>
    <div class="question-options">
        {{template "student_option" .}}
    </div>
</div>

<div class="question-group start-time-group">
    <label class="question-label">{{t .Lang "membership.start_time_question"}}</label>
    <div class="question-options">
        {{template "start_time_options" .}}
    </div>
</div>

<div id="custom-date-container" style="display: none; margin-top: 1rem;">
    <input type="date" name="custom_start_date" id="custom-start-date" class="date-input">
</div>
{{end}}

{{define "commitment_options"}}
<label class="option-label">
    <input type="radio" name="commitment" value="12">
    <span>{{t .Lang "membership.12_months_best_price"}}</span>
</label>

{{if .ShowSpecialOffer}}
<label class="option-label special">
    <input type="radio" name="commitment" value="autumn_special">
    <span>üçÇ {{t .Lang "membership.autumn_special"}}</span>
</label>
{{end}}

<label class="option-label">
    <input type="radio" name="commitment" value="6">
    <span>{{t .Lang "membership.6_months"}}</span>
</label>

<label class="option-label">
    <input type="radio" name="commitment" value="0">
    <span>{{t .Lang "membership.no_binding_flexible"}}</span>
</label>

<label class="option-label">
    <input type="radio" name="commitment" value="trial">
    <span>{{t .Lang "membership.trial_only"}}</span>
</label>
{{end}}

{{define "student_option"}}
<label class="option-label">
    <input type="checkbox" name="is_student_senior" value="true">
    <span>{{t .Lang "membership.student_senior_yes"}}</span>
</label>
{{end}}

{{define "start_time_options"}}
<label class="option-label">
    <input type="radio" name="start_time" value="now" checked>
    <span>{{t .Lang "membership.start_asap"}}</span>
</label>

<label class="option-label">
    <input type="radio" name="start_time" value="custom">
    <span>{{t .Lang "membership.start_custom_date"}}</span>
</label>
{{end}}

{{define "membership_checkout_content"}}
<h2 class="checkout-title">
    {{if .HasHadMembership}}{{t .Lang "membership.your_new_membership"}}{{else}}{{t .Lang "membership.your_membership"}}{{end}}
</h2>

<div id="special-offer" class="special-offer-notice" style="display: none;">
    üçÇ {{t .Lang "membership.autumn_special_notice"}}
</div>

<div class="price-display">
    <div id="current-price" class="current-price">1490 kr/mnd</div>
    <div id="original-price" class="original-price" style="display: none;"></div>
    <div id="discount-badge" class="discount-badge" style="display: none;">20% {{t .Lang "membership.discount"}}</div>
</div>

<div class="membership-details">
    <div class="detail-row">
        <span>{{t .Lang "membership.membership_type"}}:</span>
        <span id="membership-type">{{t .Lang "membership.no_binding"}}</span>
    </div>
    <div class="detail-row">
        <span>{{t .Lang "membership.binding"}}:</span>
        <span id="binding-period">{{t .Lang "membership.none"}}</span>
    </div>
    <div class="detail-row" id="discount-row" style="display: none;">
        <span>{{t .Lang "membership.student_senior_discount"}}:</span>
        <span id="discount-status">20%</span>
    </div>
    <div class="detail-row">
        <span>{{t .Lang "membership.total_price_per_month"}}:</span>
        <span id="total-price">1490 kr</span>
    </div>
</div>

{{if .HasCurrentMembership}}
<button class="primary checkout-btn" onclick="proceedToCheckout()">{{t .Lang "membership.change"}}</button>
{{else}}
<button class="primary checkout-btn" onclick="proceedToCheckout()">{{t .Lang "membership.proceed_to_payment"}}</button>
{{end}}

<p style="font-size: 0.9rem; color: #666; text-align: center;">
    {{t .Lang "membership.no_hidden_costs"}}
</p>

<style>
.checkout-title {
    font-size: 1.25rem;
    margin-bottom: 1.5rem;
    color: #333;
    text-align: center;
    border-bottom: 2px solid #007cba;
    padding-bottom: 0.5rem;
    margin-top: 0;
}

.special-offer-notice {
    background: linear-gradient(135deg, #ff6b35, #f7931e);
    color: white;
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 1rem;
    text-align: center;
    font-weight: 600;
}

.price-display {
    text-align: center;
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: #f8f9fa;
    border-radius: 8px;
}

.current-price {
    font-size: 2.5rem;
    font-weight: 700;
    color: #007cba;
    margin-bottom: 0.5rem;
}

.original-price {
    font-size: 1.1rem;
    color: #666;
    text-decoration: line-through;
    margin-bottom: 0.5rem;
}

.discount-badge {
    background: #28a745;
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
    display: inline-block;
}

.membership-details {
    margin-bottom: 2rem;
    padding: 1rem;
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
}

.detail-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
}

.detail-row:last-child {
    margin-bottom: 0;
    font-weight: 600;
    padding-top: 0.5rem;
    border-top: 1px solid #e0e0e0;
}

.checkout-btn {
    width: 100%;
    margin-bottom: 1rem;
}
</style>
{{end}}