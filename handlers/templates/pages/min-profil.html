{{define "content"}}
{{template "navigation" .}}

<main class="main-content">
    <h1 class="page-title">{{t .Lang "profile.title"}}</h1>
    
    <div class="profile-card">
        {{if .ShowSuccess}}
        <div class="success-message">
            {{t .Lang "profile.profile_updated"}}
        </div>
        {{end}}
        
        <div class="profile-header">
            <div class="profile-avatar">{{substr .Name 0 1}}</div>
            <div class="profile-info">
                <h2>{{.Name}}</h2>
                <div class="email">{{.Email}}</div>
            </div>
        </div>
        
        <!-- Language Selector Section -->
        <div class="profile-section">
            <h3 class="section-title">{{t .Lang "language.select_language"}}</h3>
            {{template "language_selector" .}}
        </div>
        
        <div class="profile-details" id="profile-view">
            <div class="detail-item">
                <span class="detail-label">{{t .Lang "profile.full_name"}}:</span>
                <span class="detail-value">{{.Name}}</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">{{t .Lang "profile.email"}}:</span>
                <span class="detail-value">{{.Email}}</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">{{t .Lang "profile.phone"}}:</span>
                <span class="detail-value">{{if .Phone}}{{.Phone}}{{else}}-{{end}}</span>
            </div>
            {{if .Address}}
            <div class="detail-item">
                <span class="detail-label">{{t .Lang "profile.address"}}:</span>
                <span class="detail-value">{{.Address}}</span>
            </div>
            {{end}}
            {{if .PostalCode}}
            <div class="detail-item">
                <span class="detail-label">{{t .Lang "profile.postal_code"}}:</span>
                <span class="detail-value">{{.PostalCode}}</span>
            </div>
            {{end}}
            {{if .City}}
            <div class="detail-item">
                <span class="detail-label">{{t .Lang "profile.city"}}:</span>
                <span class="detail-value">{{.City}}</span>
            </div>
            {{end}}
            {{if .Country}}
            <div class="detail-item">
                <span class="detail-label">{{t .Lang "profile.country"}}:</span>
                <span class="detail-value">{{.Country}}</span>
            </div>
            {{end}}
            {{if .Birthdate}}
            <div class="detail-item">
                <span class="detail-label">{{t .Lang "profile.birthdate"}}:</span>
                <span class="detail-value">{{.Birthdate}}</span>
            </div>
            {{end}}
            <div class="detail-item">
                <span class="detail-label">{{t .Lang "profile.member_since"}}:</span>
                <span class="detail-value">{{.JoinDate}}</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">{{t .Lang "profile.user_id"}}:</span>
                <span class="detail-value">#{{.ID}}</span>
            </div>
        </div>
        
        <form class="edit-form" id="profile-edit" method="POST" action="/elev/min-profil">
            <div class="form-group">
                <label for="name">{{t .Lang "profile.full_name"}}:</label>
                <input type="text" id="name" name="name" value="{{.Name}}" required>
            </div>
            <div class="form-group">
                <label for="email">{{t .Lang "profile.email"}}:</label>
                <input type="email" id="email" name="email" value="{{.Email}}" required>
            </div>
            <div class="form-group">
                <label for="phone">{{t .Lang "profile.phone"}}:</label>
                <input type="tel" id="phone" name="phone" value="{{.Phone}}">
            </div>
            <div class="form-group">
                <label for="address">{{t .Lang "profile.address"}}:</label>
                <input type="text" id="address" name="address" value="{{.Address}}">
            </div>
            <div class="form-group">
                <label for="postal_code">{{t .Lang "profile.postal_code"}}:</label>
                <input type="text" id="postal_code" name="postal_code" value="{{.PostalCode}}">
            </div>
            <div class="form-group">
                <label for="city">{{t .Lang "profile.city"}}:</label>
                <input type="text" id="city" name="city" value="{{.City}}">
            </div>
            <div class="form-group">
                <label for="country">{{t .Lang "profile.country"}}:</label>
                <input type="text" id="country" name="country" value="{{.Country}}">
            </div>
            <div class="form-group">
                <label for="birthdate">{{t .Lang "profile.birthdate"}}:</label>
                <input type="date" id="birthdate" name="birthdate" value="{{.Birthdate}}">
            </div>
            <div class="form-actions">
                <button type="submit" class="save-btn">{{t .Lang "profile.save_changes"}}</button>
                <button type="button" class="cancel-btn" onclick="cancelEdit()">{{t .Lang "profile.cancel"}}</button>
            </div>
        </form>
        
        <button class="edit-profile-btn" id="edit-btn" onclick="editProfile()">
            {{t .Lang "profile.edit_profile"}}
        </button>
    </div>
</main>

{{template "profile_styles"}}
{{template "profile_scripts"}}
{{end}}