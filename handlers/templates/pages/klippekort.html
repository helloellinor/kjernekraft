{{define "content"}}
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f5f5f5;
        color: #333;
    }
    .main {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
    }
    .page-title {
        font-size: 2rem;
        margin-bottom: 1rem;
        color: #333;
        border-bottom: 2px solid #007cba;
        padding-bottom: 0.5rem;
    }
    .page-description {
        font-size: 1.1rem;
        color: #666;
        margin-bottom: 3rem;
        text-align: center;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 3rem;
    }
    
    /* Step 1: Category Selection */
    .step {
        margin-bottom: 2rem;
    }
    .step-title {
        font-size: 1.5rem;
        margin-bottom: 1.5rem;
        color: #333;
        text-align: center;
    }
    .categories-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }
    .category-card {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        transition: transform 0.2s, box-shadow 0.2s;
        cursor: pointer;
        border: 2px solid transparent;
        text-align: center;
    }
    .category-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        border-color: #007cba;
    }
    .category-card.selected {
        border-color: #007cba;
        background-color: #f0f8ff;
    }
    .category-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        color: #007cba;
    }
    .category-name {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: #333;
    }
    .category-description {
        color: #666;
        font-size: 0.9rem;
    }
    
    /* Step 2: Package Selection */
    .packages-section {
        display: none;
        margin-top: 3rem;
    }
    .packages-section.active {
        display: block;
    }
    .packages-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }
    .package-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        transition: transform 0.2s, box-shadow 0.2s;
        position: relative;
        border: 2px solid transparent;
        cursor: pointer;
    }
    .package-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        border-color: #007cba;
    }
    .package-card.selected {
        border-color: #007cba;
        background-color: #f0f8ff;
    }
    .package-card.popular {
        border-color: #ff6b35;
    }
    .popular-badge {
        position: absolute;
        top: -10px;
        right: 15px;
        background: #ff6b35;
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: 600;
    }
    .package-name {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: #333;
    }
    .package-description {
        color: #666;
        margin-bottom: 1rem;
        font-size: 0.9rem;
    }
    .package-details {
        margin-bottom: 1.5rem;
    }
    .package-price {
        font-size: 1.8rem;
        font-weight: 700;
        color: #007cba;
        margin-bottom: 0.5rem;
    }
    .package-count {
        font-size: 1rem;
        color: #666;
        margin-bottom: 0.5rem;
    }
    .price-per-session {
        font-size: 0.9rem;
        color: #333;
        font-weight: 500;
    }
    .savings {
        color: #27ae60;
        font-weight: 600;
        font-size: 0.9rem;
        margin-top: 0.5rem;
    }
    
    /* Purchase Section */
    .purchase-section {
        display: none;
        margin-top: 3rem;
        padding: 2rem;
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .purchase-section.active {
        display: block;
    }
    .purchase-title {
        font-size: 1.5rem;
        margin-bottom: 1rem;
        color: #333;
        text-align: center;
    }
    .selected-details {
        background: #f0f8ff;
        padding: 1.5rem;
        border-radius: 8px;
        margin-bottom: 2rem;
        text-align: center;
    }
    .selected-details h3 {
        font-size: 1.25rem;
        margin-bottom: 0.5rem;
        color: #007cba;
    }
    .selected-details .price {
        font-size: 2rem;
        font-weight: 700;
        color: #007cba;
        margin: 1rem 0;
    }
    .purchase-btn {
        width: 100%;
        padding: 1rem 2rem;
        background-color: #007cba;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .purchase-btn:hover {
        background-color: #005a87;
    }
    
    @media (max-width: 768px) {
        .categories-grid, .packages-grid {
            grid-template-columns: 1fr;
        }
    }
</style>

{{template "navigation" .}}

<main class="main">
    <h1 class="page-title">Klippekort</h1>
    <p class="page-description">
        Velg type trening og antall klipp. Jo flere klipp du kj√∏per, desto mindre blir prisen per √∏kt.
    </p>
    
    <!-- Step 1: Category Selection -->
    <div class="step" id="step1">
        <h2 class="step-title">Steg 1: Velg type trening</h2>
        <div class="categories-grid">
            <div class="category-card" data-category="gruppetimer-sal" onclick="selectCategory('gruppetimer-sal')">
                <div class="category-icon">üßò‚Äç‚ôÄÔ∏è</div>
                <h3 class="category-name">Gruppetimer Sal</h3>
                <p class="category-description">Yoga, Pilates Mat, og andre sal-baserte gruppetimer</p>
            </div>
            
            <div class="category-card" data-category="reformer-apparatus" onclick="selectCategory('reformer-apparatus')">
                <div class="category-icon">üí™</div>
                <h3 class="category-name">Reformer/Apparatus</h3>
                <p class="category-description">Spesialisert Pilates utstyr og apparatus-trening</p>
            </div>
            
            <div class="category-card" data-category="self-practice" onclick="selectCategory('self-practice')">
                <div class="category-icon">üèÉ‚Äç‚ôÇÔ∏è</div>
                <h3 class="category-name">Self Practice Pilates Apparatus</h3>
                <p class="category-description">Selvstendig trening p√• Pilates apparatus</p>
            </div>
            
            <div class="category-card" data-category="online-gruppetimer" onclick="selectCategory('online-gruppetimer')">
                <div class="category-icon">üíª</div>
                <h3 class="category-name">Online Gruppetimer</h3>
                <p class="category-description">Live streaming og on-demand klasser</p>
            </div>
            
            <div class="category-card" data-category="personlig-trening" onclick="selectCategory('personlig-trening')">
                <div class="category-icon">üë®‚Äçüíº</div>
                <h3 class="category-name">Personlig Trening</h3>
                <p class="category-description">One-on-one trening med personlig trener</p>
            </div>
            
            <div class="category-card" data-category="stressmestring" onclick="selectCategory('stressmestring')">
                <div class="category-icon">üß†</div>
                <h3 class="category-name">Stressmestring</h3>
                <p class="category-description">Avslapning, meditasjon og stressh√•ndtering</p>
            </div>
        </div>
    </div>
    
    <!-- Step 2: Package Selection for each category -->
    <div class="packages-section" id="packages-gruppetimer-sal">
        <h2 class="step-title">Steg 2: Velg antall klipp for Gruppetimer Sal</h2>
        <div class="packages-grid">
            <div class="package-card" data-package="gruppetimer-5" onclick="selectPackage('gruppetimer-sal', 5, 1200, 'Perfekt for √• pr√∏ve ut')">
                <h3 class="package-name">5 klipp</h3>
                <p class="package-description">Perfekt for √• pr√∏ve ut</p>
                <div class="package-details">
                    <div class="package-price">1200 kr</div>
                    <div class="package-count">5 klipp</div>
                    <div class="price-per-session">240 kr per √∏kt</div>
                </div>
            </div>
            
            <div class="package-card popular" data-package="gruppetimer-10" onclick="selectPackage('gruppetimer-sal', 10, 2200, 'Mest popul√¶re pakke')">
                <div class="popular-badge">Mest popul√¶r</div>
                <h3 class="package-name">10 klipp</h3>
                <p class="package-description">Mest popul√¶re pakke</p>
                <div class="package-details">
                    <div class="package-price">2200 kr</div>
                    <div class="package-count">10 klipp</div>
                    <div class="price-per-session">220 kr per √∏kt</div>
                    <div class="savings">Spar 200 kr!</div>
                </div>
            </div>
            
            <div class="package-card" data-package="gruppetimer-20" onclick="selectPackage('gruppetimer-sal', 20, 4000, 'Beste verdi')">
                <h3 class="package-name">20 klipp</h3>
                <p class="package-description">Beste verdi</p>
                <div class="package-details">
                    <div class="package-price">4000 kr</div>
                    <div class="package-count">20 klipp</div>
                    <div class="price-per-session">200 kr per √∏kt</div>
                    <div class="savings">Spar 800 kr!</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add other package sections here for brevity -->
    
    <!-- Purchase Section -->
    <div class="purchase-section" id="purchase-section">
        <h2 class="purchase-title">Bekreft ditt valg</h2>
        <div class="selected-details">
            <h3 id="selected-package-name"></h3>
            <p id="selected-package-description"></p>
            <div class="price" id="selected-package-price"></div>
            <p id="selected-package-details"></p>
        </div>
        <button class="purchase-btn" onclick="purchasePackage()">Kj√∏p klippekort</button>
    </div>
</main>

<script>
    let selectedCategory = null;
    let selectedPackage = null;
    
    function selectCategory(category) {
        // Clear previous selections
        document.querySelectorAll('.category-card').forEach(card => {
            card.classList.remove('selected');
        });
        document.querySelectorAll('.packages-section').forEach(section => {
            section.classList.remove('active');
        });
        document.getElementById('purchase-section').classList.remove('active');
        
        // Select new category
        document.querySelector('.category-card[data-category="' + category + '"]').classList.add('selected');
        const packagesSection = document.getElementById('packages-' + category);
        if (packagesSection) {
            packagesSection.classList.add('active');
            packagesSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        selectedCategory = category;
        selectedPackage = null;
    }
    
    function selectPackage(category, clips, price, description) {
        // Clear previous package selections
        document.querySelectorAll('.package-card').forEach(card => {
            card.classList.remove('selected');
        });
        
        // Select new package
        event.currentTarget.classList.add('selected');
        
        selectedPackage = {
            category: category,
            clips: clips,
            price: price,
            description: description,
            pricePerSession: price / clips
        };
        
        // Update purchase section
        const categoryNames = {
            'gruppetimer-sal': 'Gruppetimer Sal',
            'reformer-apparatus': 'Reformer/Apparatus',
            'self-practice': 'Self Practice Pilates Apparatus',
            'online-gruppetimer': 'Online Gruppetimer',
            'personlig-trening': 'Personlig Trening',
            'stressmestring': 'Stressmestring'
        };
        
        document.getElementById('selected-package-name').textContent = clips + ' klipp ' + categoryNames[category];
        document.getElementById('selected-package-description').textContent = description;
        document.getElementById('selected-package-price').textContent = price + ' kr';
        document.getElementById('selected-package-details').textContent = clips + ' klipp ‚Ä¢ ' + Math.round(selectedPackage.pricePerSession) + ' kr per √∏kt';
        
        // Show purchase section
        document.getElementById('purchase-section').classList.add('active');
        document.getElementById('purchase-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    
    function purchasePackage() {
        if (!selectedPackage) {
            alert('Vennligst velg en pakke f√∏rst');
            return;
        }
        
        // TODO: Implement actual purchase functionality
        alert('Kj√∏p av ' + selectedPackage.clips + ' klipp for ' + selectedPackage.price + ' kr - kommer snart!');
    }
</script>
{{end}}