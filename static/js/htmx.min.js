// HTMX minimal implementation for form handling
(function() {
    'use strict';
    
    // Simple HTMX-like functionality
    window.htmx = {
        process: function(element) {
            var forms = element.querySelectorAll('[hx-post]');
            forms.forEach(function(form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    var url = form.getAttribute('hx-post');
                    var target = form.getAttribute('hx-target');
                    var formData = new FormData(form);
                    
                    fetch(url, {
                        method: 'POST',
                        body: formData
                    })
                    .then(function(response) {
                        return response.text();
                    })
                    .then(function(html) {
                        if (target) {
                            var targetElement = document.querySelector(target);
                            if (targetElement) {
                                targetElement.innerHTML = html;
                            }
                        }
                    })
                    .catch(function(error) {
                        console.error('Error:', error);
                        if (target) {
                            var targetElement = document.querySelector(target);
                            if (targetElement) {
                                targetElement.innerHTML = '<div class="error">Feil ved innsending av skjema</div>';
                            }
                        }
                    });
                });
            });
        }
    };
    
    // Auto-process on load
    document.addEventListener('DOMContentLoaded', function() {
        htmx.process(document);
    });
})();